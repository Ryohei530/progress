<%= form_with(model: @report, local: true) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  
  <div class="aim">
    <p>今月の目的</p>
    <%= current_user.goals.find(9).monthly_aim %>
  </div>
  
  <div class="indicator">
    <p>今月の目標指標</p>
    <%= current_user.goals.find(9).monthly_indicator %>
  </div>
  
  <div class="field">
    <% f.label :content, "感想、気付き" %>
    <%= f.text_area :content, placeholder: "今日の成果を報告しよう！" %>
  </div>
    
    <%= f.fields_for :report_actions, @report.report_actions.build do |rep| %>
    <div class="action">
      <%= rep.label :number, current_user.goals.find(9).goal_actions.first.content %>
      <%= rep.number_field :number %>
      /<%= current_user.goals.find(9).goal_actions.first.number %>
    </div>
    <% end %>
    
  <span class="image">
    <%= f.file_field :image, accept: "image/jpeg,image/gif,image/png" %> 
  </span>
  
  <%= f.submit "投稿", class: "btn btn-primary" %>
<% end %>

<script type="text/javascript">
  $("#report_image").bind("change", function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert("Maximum file size is 5MB. Please choose a smaller file.");
      $("#report_image").val("");
    }
  });
</script>